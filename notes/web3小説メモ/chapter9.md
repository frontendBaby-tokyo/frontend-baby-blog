# 「信頼ゼロ社会を生きるWEB3.0原理主義エンジニアの奇妙すぎる日常に翻弄される僕 ～フルノードを立てなきゃDAppも使えません！」

## 第9話「NFTの真実 後編：オンチェーンの革命」

一週間が過ぎた。

D氏から教わったオンチェーンNFTの知識を元に、私は自分なりのプロジェクトに取り組んでいた。SVGを使った簡単なジェネラティブアートをイーサリアムテストネット上にデプロイすることに成功したものの、ガス最適化の壁に直面していた。

「これでは本番環境でのデプロイコストが高すぎる...」

画面に表示されたガス予測は、私の予算をはるかに超えていた。どうすればD氏のように効率的なオンチェーンNFTを作れるのだろう？

そんな疑問を抱えながら、私は前回D氏から受け取った暗号化された座標に向かった。今回の場所は前回とは異なり、都心から離れた古い工業地帯の一角だった。

錆びついた鉄扉の前に立つと、小さなカメラが私を捉えた。数秒後、扉が自動的に開いた。

中に入ると、そこは想像を超える空間だった。広々としたロフト風の部屋には、最新のコンピュータ設備と並んで、様々なアート作品が展示されていた。壁一面には複雑なコードが投影され、天井からはホログラフィックなディスプレイが吊り下げられている。

「来たか」

D氏が現れた。今日は珍しく、黒いTシャツにジーンズという普段着だった。

「ここは私のアトリエだ。創作と実験のための空間」

Mも同席していた。彼女は大きなディスプレイの前で何かのコードを書いていた。

「前回のNFTは調査したか？」D氏が尋ねた。

「はい。完全にオンチェーンで実装されていて、所有者のトランザクション履歴に基づいて独自のパターンを生成する仕組みになっていました。それと、暗号化されたメッセージも解読しました」

D氏は満足げにうなずいた。「よくやった。基本的な暗号解読能力があることが確認できた」

彼は中央のワークステーションに私を案内した。

「今日はオンチェーンNFTの技術的詳細と哲学的意義について話す」

大きなスクリーンには、様々なNFTプロジェクトのコードと画像が表示された。

「まず、オンチェーンNFTの定義を明確にしよう」D氏は説明を始めた。「完全なオンチェーンNFTとは、アートワーク、メタデータ、ロジックの全てがブロックチェーン上に直接保存されているものだ」

彼はキーボードを叩き、いくつかのコントラクトコードを表示した。

「これらは異なるアプローチのオンチェーンNFTだ。SVGベース、Base64エンコードされた画像データ、そしてアルゴリズミックに生成されるアートワーク」

Mが補足した。「オンチェーンNFTの最大の課題は、ブロックチェーンのストレージコストです。イーサリアムでは、1バイトのストレージに約16ガスかかります。つまり、1MBのデータを保存するには、現在のガス価格で数百万円のコストがかかる計算になります」

D氏は続けた。「だからこそ、データ圧縮とエンコーディングの技術が重要になる。例えば、このSVGベースのNFTを見てみよう」

彼は一つのコントラクトを詳しく表示した。

```solidity
function tokenURI(uint256 tokenId) public view override returns (string memory) {
    string memory svg = generateSVG(tokenId);
    string memory json = Base64.encode(
        bytes(
            string(
                abi.encodePacked(
                    '{"name": "OnChain Art #', 
                    toString(tokenId),
                    '", "description": "Fully on-chain generative art", "image": "data:image/svg+xml;base64,',
                    Base64.encode(bytes(svg)),
                    '"}'
                )
            )
        )
    );
    return string(abi.encodePacked("data:application/json;base64,", json));
}
```

「このコードは何をしているか分かるか？」

「SVGを生成して、それをBase64エンコードし、JSONメタデータに埋め込んでいます。そして、そのJSONもBase64エンコードして返しています」

「正解だ」D氏はうなずいた。「これにより、NFTのメタデータとイメージデータの両方がブロックチェーン上に直接保存される。外部依存がなく、完全に自己完結している」

彼は別のコードを表示した。

「次に、データ圧縮技術を見てみよう。これはより複雑なオンチェーンNFTの例だ」

表示されたコードは、独自の圧縮アルゴリズムを使用して画像データを効率的に保存する方法を示していた。

「このプロジェクトでは、RLE（Run-Length Encoding）という圧縮方式を使っている。繰り返しパターンを効率的に表現することで、データサイズを大幅に削減できる」

Mが実例を示した。「例えば、『AAAABBBCCDAA』というデータは、『4A3B2C1D2A』と表現できます。これにより、12バイトのデータが10バイトに圧縮されます。実際のアートワークでは、もっと効率的な圧縮が可能です」

D氏は続けた。「さらに高度な技術として、パレット圧縮がある。これは限られた色数を使うアートワークで特に効果的だ」

彼は自作のツールを見せてくれた。これは、画像データを分析し、最も効率的な圧縮方法を提案するシステムだった。

「このツールを使えば、通常のPNGやJPEGをオンチェーンで表現可能なフォーマットに変換できる。ガスコストの予測も可能だ」

私は自分のプロジェクトについて質問した。「私もSVGを使ったNFTを作ってみたのですが、ガスコストが高すぎて困っています。どうすれば最適化できますか？」

D氏は私のコードを見て、すぐに問題点を指摘した。

「SVGの記述が冗長だ。パスの圧縮、不要な属性の削除、数値の精度削減...これらで30%以上のガス削減が可能だ」

彼は具体的な最適化方法を教えてくれた。

「例えば、小数点以下3桁まで使っているが、多くの場合1桁で十分だ。また、色コードも短縮形を使える。『#ff0000』ではなく『#f00』でいい」

Mも助言を加えた。「SVGの最適化ツールを使うと良いでしょう。SVGO（SVG Optimizer）などのオープンソースツールが便利です」

D氏は話題を変えた。「技術的な側面は重要だが、オンチェーンNFTの哲学的意義も理解する必要がある」

彼は大きなディスプレイに、様々なNFTプロジェクトの歴史的な流れを表示した。

「NFTの歴史は、『所有権の証明』から『真の分散型デジタル資産』への進化の歴史だ。初期のNFTは単なるメタデータへのポインタだったが、オンチェーンNFTは完全な自己完結型のデジタル資産だ」

彼は真剣な表情で続けた。

「デジタル所有権の本質とは何か？それは『検証可能な希少性』と『永続的なアクセス』だ。オフチェーンNFTは前者は満たすが、後者は満たさない。真のデジタル所有権を実現するには、オンチェーン実装が不可欠だ」

Mが補足した。「芸術としてのNFTと投機対象としてのNFTは区別する必要があります。多くの人は価格上昇を期待して購入しますが、真の価値は技術的革新性と芸術的表現にあります」

D氏はうなずいた。「その通りだ。私がコレクションしているのは、技術的に革新的で、芸術的にも価値のあるオンチェーンNFTだけだ」

彼は立ち上がり、部屋の奥にある特別なディスプレイに私を案内した。

「これが私の最新プロジェクトだ。『Eternal Fragments』と呼んでいる」

ディスプレイには、複雑で美しいジェネラティブアートが表示されていた。幾何学的なパターンが絶えず変化し、色彩が流れるように移り変わる。

「これは完全にオンチェーンで実装された動的NFTだ。時間、所有者のアドレス、イーサリアムネットワークの状態など、様々な要素に応じて変化する」

D氏はコードの一部を見せてくれた。驚くほど効率的に実装されており、複雑な視覚効果を最小限のデータで表現していた。

「このプロジェクトの特徴は、『時間の概念』を取り入れていることだ。NFTは静的なものではなく、時間とともに進化する生命体のようなものだ」

Mが技術的な詳細を説明した。「このプロジェクトでは、ブロックタイムスタンプをシード値として使用し、擬似乱数生成アルゴリズムでパターンを生成しています。これにより、予測可能でありながらも常に変化する視覚表現が可能になります」

D氏は続けた。「さらに、このNFTには『記憶』の概念もある。所有者が特定のアクションを実行すると、NFTの状態が変化し、その変化は永続的に記録される」

彼はデモンストレーションとして、特定の関数を呼び出した。すると、アートワークのパターンが微妙に変化し、新しい要素が追加された。

「これにより、所有者とNFTの間に独自の関係性が生まれる。単なる所有物ではなく、共に成長するパートナーのようなものだ」

私はその概念に魅了された。これはただのデジタルアートではなく、ブロックチェーン技術の可能性を最大限に引き出した新しい表現形態だった。

「しかし、このプロジェクトにも課題がある」D氏は率直に語った。「ガスコストの問題、ブロックチェーンの処理速度の制限、そして最大の課題は『理解の壁』だ」

「理解の壁？」

「そう。多くの人々は、オンチェーンNFTの価値を理解していない。彼らにとって、JPEGへのリンクも完全オンチェーンのNFTも違いがない。教育と啓蒙が必要だ」

D氏は深いため息をついた。「私がデジタル考古学者を自称する理由は、将来、多くのNFTが消失した後、真に永続的なデジタル資産が何であったかを示すためだ」

彼は別のディスプレイを指さした。そこには、時系列順に並べられた「消失したNFTプロジェクト」のリストがあった。

「これらは全て、一時は数百万ドル規模の評価を受けたプロジェクトだ。しかし今、そのアートワークの多くはアクセス不能になっている。これが『見せかけの分散化』の結末だ」

Mが静かに言った。「私たちが目指しているのは、100年後、1000年後も存在し続けるデジタル資産です。それが真のNFTの姿だと信じています」

D氏は私に向き直った。「さて、君のプロジェクトについて話そう。オンチェーンNFTを作りたいと言っていたな」

「はい。でも、技術的な壁にぶつかっています」

「具体的に見せてみろ」

私は自分のノートPCを開き、作成中のコードを表示した。D氏とMは真剣な表情でコードを分析し、様々な改善点を指摘してくれた。

「まず、SVGの構造を最適化しよう。不要なグループタグを削除し、パスを効率化する」

「次に、色の定義方法を変更する。現在のRGB形式ではなく、HSLを使うとコード量を削減できる」

D氏とMは次々と最適化案を提示してくれた。彼らの指導に従ってコードを修正していくと、ガス予測は驚くほど減少していった。

「これで約60%のガス削減に成功した」D氏は満足げに言った。「十分にデプロイ可能なレベルだ」

「ありがとうございます！」

「だが、技術的な最適化だけでは不十分だ」D氏は真剣な表情で続けた。「コンセプトの最適化も必要だ」

「コンセプトの最適化？」

「そう。技術的制約を逆手に取り、それを作品の一部にする発想だ」

彼は自分のプロジェクトを例に挙げた。

「『Eternal Fragments』では、ストレージの制約を創造性の源泉としている。限られたデータ量で最大の表現を実現するために、数学的アルゴリズムを活用している」

Mが補足した。「これは日本の俳句のようなものです。厳格な制約の中で、いかに豊かな表現を実現するか。それがオンチェーンアートの醍醐味です」

D氏はさらに説明を続けた。

「例えば、フラクタルアルゴリズムを使えば、数行のコードで無限に複雑なパターンを生成できる。パーリンノイズを使えば、自然な質感を表現できる。これらは全て、最小限のデータで最大限の表現を実現する技術だ」

彼らの助言に従って、私は自分のプロジェクトのコンセプトを再考した。単なる静的なSVGアートではなく、数学的アルゴリズムを活用した動的なジェネラティブアートへと方向転換することにした。

数時間にわたる作業の末、私たちは完全に新しいプロジェクトを設計した。それは「Digital Echoes」と名付けられ、所有者のウォレットアドレスから独自のビジュアルパターンを生成するオンチェーンNFTだった。

「これなら、技術的にも芸術的にも価値のあるプロジェクトになる」D氏は満足げにうなずいた。

作業の合間、D氏は珍しく自分の哲学について語り始めた。

「私がオンチェーンNFTにこだわる理由は単純だ。真の分散化と永続性を追求するためだ」

彼はコーヒーを一口飲み、続けた。

「ブロックチェーンの革命的な点は、中央集権的な権力に依存せずに信頼を構築できることだ。しかし、多くのプロジェクトはその本質を見失っている。彼らは『分散型』を謳いながら、実際には中央集権的なインフラに依存している」

Mも自分の考えを述べた。

「私がD氏と協力しているのは、彼の哲学に共感したからです。デジタルアートの世界では、作品の保存と継承が大きな課題です。従来のデジタルアートは、特定のプラットフォームやデバイスに依存し、技術の進化とともに消失するリスクがあります。オンチェーンNFTは、その課題に対する一つの解決策なのです」

D氏は立ち上がり、部屋の中央にある特別なディスプレイに私を案内した。

「これが私の最も価値あるコレクションだ」

ディスプレイには、一見するとシンプルな幾何学的なパターンが表示されていた。しかし、よく見ると、そのパターンは微妙に変化し、複雑な数学的構造を持っていることが分かる。

「これは『Genesis』と呼ばれるプロジェクトの一部だ。イーサリアムの初期、2017年に作られた完全オンチェーンNFTだ」

D氏は敬意を込めてそのアートワークを見つめた。

「このNFTは、技術的にも歴史的にも貴重な存在だ。当時のガス価格では数ドルで作れたが、今なら数万ドルのコストがかかる」

彼は続けた。

「しかし、その価値は金銭では測れない。これは、デジタル資産の真の永続性を追求した先駆者の作品だ。イーサリアムが存在する限り、このアートは消えることがない」

Mが付け加えた。「これは単なるアートではなく、デジタル文化遺産です。将来の世代に残すべき重要な作品です」

D氏は私に向き直った。

「君のプロジェクト『Digital Echoes』も、同じ哲学を持っている。技術的な最適化と芸術的表現のバランスが取れている。これは価値のある作品になるだろう」

「これは君へのギフトだ」D氏は未開封の小さなハードウェアウォレットを取り出した。

「これは...？」

「新品のハードウェアウォレットだ。だが、私が設定したものを渡すなど論外だ。自分で初期化しろ」

D氏は部屋を出て行った。「終わったら呼べ。秘密鍵生成の過程は誰にも見せるな。たとえ私でもだ」

私は指示に従い、ハードウェアウォレットを初期化し、新しい秘密鍵を生成した。シードフレーズを安全に記録した後、D氏を呼び戻した。

「公開アドレスを教えろ。もちろん、秘密鍵やシードフレーズは決して共有するな」

私がアドレスを伝えると、D氏は自分のデバイスで何かの操作を行った。

「少量のETHと、私のコレクションから一つのNFTを送信した。自分のフルノードで検証しろ」

数分後、トランザクションが確認され、ウォレットには確かにETHとNFTが表示された。

「ありがとうございます。大切にします」

「使え」D氏は珍しく笑顔を見せた。「知識は共有されてこそ価値がある。私が教えたことを実践し、さらに発展させてほしい」

Mも微笑んだ。「あなたのプロジェクトが完成したら、ぜひ見せてください。楽しみにしています」

帰り際、D氏は最後の助言をくれた。

「オンチェーンNFTの世界は、まだ始まったばかりだ。技術的な制約はあるが、それを創造性の源泉と考えれば、無限の可能性がある」

彼は真剣な表情で付け加えた。

「そして、常に自分の目で確かめることを忘れるな。『オンチェーン』と謳っていても、実際には違うプロジェクトが多い。コントラクトコードを読み、自分で検証することが重要だ」

「分かりました」私はうなずいた。「D氏から学んだことを活かして、真の分散型デジタル資産を作ります」

帰宅後、私はD氏から受け取ったハードウェアウォレットの中身を確認した。そこには確かに少量のETHと、一つのNFTが入っていた。

そのNFTをEtherscanで調べると、それは「Eternal Fragments」の一部だった。D氏の最新プロジェクトの一つを、私にプレゼントしてくれたのだ。

NFTを表示すると、そこには美しいジェネラティブアートが広がっていた。しかし、よく見ると、パターンの中に微かなメッセージが埋め込まれていることに気づいた。

「真の革命は、見えないところで起きている」

このメッセージは、特定の角度からしか見えないように設計されていた。まるで、D氏からの秘密のメッセージのようだ。

私は自分のプロジェクト「Digital Echoes」の開発を再開した。D氏とMから学んだ技術と哲学を活かし、真の分散型デジタル資産を作り上げることを決意した。

数週間後、プロジェクトは完成し、イーサリアムメインネットにデプロイされた。ガスコストは予想よりも低く、D氏の最適化アドバイスが功を奏した証だった。

最初のNFTをミントし、そのビジュアルを確認すると、私は感動で言葉を失った。それは単なるデジタルアートではなく、ブロックチェーン上に永続的に存在する、私自身の創造物だった。

D氏に報告すると、彼からは珍しく温かいメッセージが返ってきた。

「よくやった。君は真のオンチェーンアーティストへの第一歩を踏み出した。次回は、DAOの真実について話そう」

私はモニターの前で微笑んだ。D氏の極端な警戒心と深い知識は、時に理解しがたいものだったが、その根底には真の分散化と永続性を追求する崇高な哲学があった。

そして、その哲学は少しずつ私の中にも根付き始めていた。

---

## WEB3.0豆知識

**オンチェーンNFTの技術的手法**  
オンチェーンNFTを実現するための主な技術的手法には以下のようなものがあります：

1. **SVGベースのアプローチ**: SVG（Scalable Vector Graphics）はXMLベースのベクター画像形式で、テキストとして表現できるため、ブロックチェーン上に直接保存するのに適しています。数学的な図形や関数を使って複雑なビジュアルを生成できます。

2. **Base64エンコーディング**: バイナリデータをASCII文字列に変換する方法で、画像データをブロックチェーン上に保存する際に使用されます。「data:image/svg+xml;base64,...」のような形式でデータURIとして埋め込まれます。

3. **データ圧縮技術**: RLE（Run-Length Encoding）やHuffman符号化などの圧縮アルゴリズムを使用して、データサイズを削減します。特に繰り返しパターンの多いピクセルアートなどに効果的です。

4. **ジェネラティブアルゴリズム**: フラクタル、パーリンノイズ、セルオートマトンなどの数学的アルゴリズムを使用して、少量のコードから複雑なビジュアルを生成します。これにより、ストレージコストを大幅に削減できます。

**デジタル考古学の概念**  
「デジタル考古学」とは、デジタル資産や情報の保存、復元、解釈を行う新しい学問分野です。D氏が自称する「デジタル考古学者」は、消失の危機にあるデジタル資産（特にNFT）を保存し、将来の世代のために記録する役割を担っています。ブロックチェーン技術は、その不変性と永続性により、デジタル考古学の重要なツールとなっています。

**次回予告：「第10話：DAOの真実」**  
「分散型自律組織（DAO）」は、中央集権的な権力構造なしに運営される組織として注目されています。しかし、D氏によれば「ほとんどのDAOは名ばかりの分散化だ」とのこと。ガバナンストークンの分配問題、マルチシグウォレットの中央集権リスク、投票システムの脆弱性...。D氏が暴くDAOの真実と、彼が密かに参加している「真の分散型組織」の驚くべき実態とは？
