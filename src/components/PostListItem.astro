---
import FormattedDate from './FormattedDate.astro'
import { useTranslations, type Languages } from '@/i18n/utils'

const {
	id,
	data: { title, description, pubDate },
	readTime,
	slug
} = Astro.props

const { lang } = Astro.params
const t = useTranslations(lang as Languages)

// readTimeから数値部分を抽出（例: "3 min read" → 3）
const minutes = parseInt(readTime) || 3
---

<article
	class='group bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 shadow-md hover:shadow-xl transition-shadow duration-300'
>
	<a href={`${import.meta.env.BASE_URL}${lang}/post/${slug}/`}>
		<div class='flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-2'>
			<h2
				class='text-xl font-semibold text-gray-900 dark:text-white line-clamp-2 transition-colors group-hover:text-blue-600 dark:group-hover:text-blue-400'
			>
				{title}
			</h2>
			<div class='flex items-center text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap'>
				<FormattedDate date={pubDate} />
			</div>
		</div>

		<div class='flex items-center gap-3 mb-3'>
			{
				readTime && (
					<span class='text-sm text-gray-500 dark:text-gray-400'>
						{minutes} {t('posts.minutesRead')}
					</span>
				)
			}
		</div>

		<p class='text-gray-700 dark:text-gray-300 line-clamp-3 leading-relaxed'>
			{description}
		</p>
	</a>
</article>
